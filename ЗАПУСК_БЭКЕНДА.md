# üöÄ –ó–∞–ø—É—Å–∫ API –±—ç–∫–µ–Ω–¥–∞

## –ü—Ä–æ–±–ª–µ–º–∞ —Å Docker Compose

Docker Compose –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ, –ø–æ—ç—Ç–æ–º—É –∑–∞–ø—É—Å—Ç–∏–º –±—ç–∫–µ–Ω–¥ —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–π Python.

## ‚úÖ –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞

### **–®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç**
–î–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Ñ–∞–π–ª `start_api_backend.bat` –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ:

```cmd
start_api_backend.bat
```

### **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É**
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **API:** http://localhost:8001
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:8001/docs

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç Python** - –Ω—É–∂–Ω–∞ –≤–µ—Ä—Å–∏—è 3.8+
2. üì¶ **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - –∏–∑ requirements.txt
3. üóÑÔ∏è **–°–æ–∑–¥–∞–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** - SQLite —Ñ–∞–π–ª `rogaine.db`
4. üåê **–ó–∞–ø—É—Å–∫–∞–µ—Ç API —Å–µ—Ä–≤–µ—Ä** - –Ω–∞ –ø–æ—Ä—Ç—É 8001

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ:**
- üìÅ **–§–∞–π–ª:** `backend/rogaine.db`
- üîÑ **–°–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- üíæ **–§–æ—Ä–º–∞—Ç:** SQLite (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**
```sql
-- –ú–∞—Ä—à—Ä—É—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
routes (id, title, points, bounds, difficulty, created_at)

-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫  
training_sessions (id, route_id, started_at, points_visited, navigation_data)

-- –û—Ü–µ–Ω–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
route_ratings (id, route_id, rating, comment)

-- –°—Å—ã–ª–∫–∏ –¥–ª—è –æ–±–º–µ–Ω–∞
route_shares (id, route_id, share_token, expires_at)
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

### **–°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç:**
```bash
curl -X POST "http://localhost:8001/api/routes" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–¢–µ—Å—Ç –º–∞—Ä—à—Ä—É—Ç",
    "bounds": {"sw_lat": 60.1, "sw_lng": 30.2, "ne_lat": 60.12, "ne_lng": 30.25},
    "start_point": {"lat": 60.11, "lng": 30.22},
    "points": [{"lat": 60.111, "lng": 30.221}, {"lat": 60.112, "lng": 30.222}]
  }'
```

### **–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤:**
```bash
curl "http://localhost:8001/api/routes"
```

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### **Python –Ω–µ –Ω–∞–π–¥–µ–Ω:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.8+ —Å https://python.org
2. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –æ—Ç–º–µ—Ç—å—Ç–µ "Add Python to PATH"
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

### **–û—à–∏–±–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```cmd
cd backend
pip install --upgrade pip
pip install -r requirements.txt
```

### **–ü–æ—Ä—Ç 8001 –∑–∞–Ω—è—Ç:**
–ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `backend/app/config.py`:
```python
PORT: int = 8002  # –õ—é–±–æ–π —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ä—Ç
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—ç–∫–µ–Ω–¥–∞ –æ–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `src/modules/apiClient.js`:

```javascript
const API_CONFIG = {
    BASE_URL: 'http://localhost:8001/api',  // –í–∞—à –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥
    TIMEOUT: 30000
};
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥** - `start_api_backend.bat`
2. üåê **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API** - http://localhost:8001/docs
3. üîó **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º** - –¥–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
4. üíæ **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç—ã

---

**–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫! üéØ**
